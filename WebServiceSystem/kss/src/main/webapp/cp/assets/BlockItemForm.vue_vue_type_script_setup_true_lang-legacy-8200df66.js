System.register(["./config-legacy-aa911d56.js","./content-legacy-405834f9.js","./DialogForm.vue_vue_type_script_setup_true_lang-legacy-46697c68.js","./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-legacy-3e01a7e1.js","./vuedraggable.umd-legacy-6b52df54.js","./index-legacy-a60600c8.js","./BaseUpload-legacy-6055c860.js"],(function(e,l){"use strict";var a,t,u,d,i,o,r,n,m,s,c,b,p,v,g,k,h,y,f,V,I,_,$,q,U,w,x,B,j;return{setters:[e=>{a=e.a},e=>{t=e.L,u=e.M,d=e.J,i=e.y},e=>{o=e._},e=>{r=e.a},null,e=>{n=e.d,m=e.p,s=e.r,c=e.v,b=e.b,p=e.e,v=e.f,g=e.w,k=e.i,h=e.l,y=e.t,f=e.I,V=e.ah,I=e.k,_=e.a8,$=e.ag,q=e.aN,U=e.a6,w=e.o,x=e.h,B=e.j},e=>{j=e.B}],execute:function(){const l=["onClick"],R=["src"],N=e("_",n({__name:"ImageExtractor",props:{modelValue:{type:Boolean,required:!0},urls:{type:Array,default:()=>[]},min:{type:Number,default:1},max:{type:Number,default:1},appendToBody:{type:Boolean}},emits:["update:modelValue","finished"],setup(e,{emit:a}){const t=e,{urls:u,max:d,modelValue:i}=m(t),o=s();return c(i,(()=>{i.value&&(o.value=q.uniq(u.value).map((e=>({url:e,checked:!1}))))})),(t,u)=>{const i=b("el-col"),r=b("el-row"),n=b("el-button"),m=b("el-dialog");return p(),v(m,{"model-value":e.modelValue,title:t.$t("article.extractImage"),width:768,"append-to-body":e.appendToBody,"onUpdate:modelValue":u[1]||(u[1]=e=>t.$emit("update:modelValue",e))},{footer:g((()=>[k(n,{type:"primary",disabled:o.value.filter((e=>e.checked)).length<e.min,onClick:u[0]||(u[0]=()=>(a("finished",o.value.filter((e=>e.checked)).map((e=>e.url))),void a("update:modelValue",!1)))},{default:g((()=>[h(y(t.$t("ok")),1)])),_:1},8,["disabled"])])),default:g((()=>[k(r,{gutter:16},{default:g((()=>[(p(!0),f($,null,V(o.value,(e=>(p(),v(i,{key:e.url,src:e,span:8,class:"mt-2"},{default:g((()=>[I("div",{class:_(["p-1 border-2 rounded cursor-pointer text-center",{"border-primary":e.checked,"border-2":e.checked}]),onClick:()=>(e=>{if(e.checked)return void(e.checked=!e.checked);let l=0;o.value.forEach((e=>{e.checked&&(l+=1),l>=d.value&&(e.checked=!1)})),e.checked=!0})(e)},[I("img",{src:e.url,class:"max-h-36 inline"},null,8,R)],10,l)])),_:2},1032,["src"])))),128))])),_:1})])),_:1},8,["model-value","title","append-to-body"])}}}));e("a",n({name:"BlockItemForm",props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},beanIds:{type:Array,required:!0},blockId:{type:Number,default:null},articleId:{type:Number,default:null},title:{type:String,default:null},description:{type:String,default:null},video:{type:String,default:null},images:{type:Array,default:()=>[]}},emits:{"update:modelValue":null,finished:null},setup(e){const l=e,{blockId:n}=m(l),c=s(),I=s(),_=s({}),q=s([]),R=U((()=>q.value.find((e=>e.id===(c.value??n?.value)))));w((async()=>{q.value=await a()}));const T=s(!1);return(l,a)=>{const m=b("el-option"),s=b("el-select"),U=b("el-form-item"),w=b("el-input"),C=b("el-button"),F=b("el-switch");return p(),f("div",null,[k(o,{values:_.value,"onUpdate:values":a[14]||(a[14]=e=>_.value=e),name:l.$t("menu.content.blockItem"),"query-bean":B(t),"create-bean":B(u),"update-bean":B(d),"delete-bean":B(i),"bean-id":e.beanId,"bean-ids":e.beanIds,focus:I.value,"init-values":()=>({blockId:B(n),articleId:e.articleId,title:e.title,description:e.description,video:e.video,enabled:!0}),"to-values":e=>({...e,articleTitle:e.article?.title,articleId:e.article?.id}),addable:R.value?.enabled,perms:"blockItem","model-value":e.modelValue,"onUpdate:modelValue":a[15]||(a[15]=e=>l.$emit("update:modelValue",e)),onFinished:a[16]||(a[16]=()=>l.$emit("finished")),onBeanChange:a[17]||(a[17]=e=>c.value=e.blockId)},{default:g((({isEdit:t})=>[k(U,{prop:"blockId",label:l.$t("blockItem.block"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:g((()=>[k(s,{modelValue:_.value.blockId,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value.blockId=e),class:"w-full",disabled:"",onChange:a[1]||(a[1]=e=>c.value=e)},{default:g((()=>[(p(!0),f($,null,V(q.value,(e=>(p(),f($,{key:e.id},[t||e.enabled?(p(),v(m,{key:0,label:e.name,value:e.id,disabled:!e.enabled},null,8,["label","value","disabled"])):x("",!0)],64)))),128))])),_:2},1032,["modelValue"])])),_:2},1032,["label","rules"]),t&&null!=_.value.articleId?(p(),v(U,{key:0,label:l.$t("blockItem.articleId")},{default:g((()=>[k(w,{modelValue:_.value.articleId,"onUpdate:modelValue":a[2]||(a[2]=e=>_.value.articleId=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):x("",!0),t&&null!=_.value.articleTitle?(p(),v(U,{key:1,label:l.$t("blockItem.articleTitle")},{default:g((()=>[k(w,{modelValue:_.value.articleTitle,"onUpdate:modelValue":a[3]||(a[3]=e=>_.value.articleTitle=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"])):x("",!0),k(U,{prop:"title",label:l.$t("blockItem.title"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:g((()=>[k(w,{ref_key:"focus",ref:I,modelValue:_.value.title,"onUpdate:modelValue":a[4]||(a[4]=e=>_.value.title=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"]),null==_.value.articleId&&R.value?.withLinkUrl?(p(),v(U,{key:2,prop:"linkUrl",label:l.$t("blockItem.linkUrl"),rules:R.value?.linkUrlRequired?[{required:!0,message:()=>l.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}]:{pattern:/^(http|\/).*$/,message:()=>l.$t("blockItem.error.linkUrl")}},{default:g((()=>[k(w,{modelValue:_.value.linkUrl,"onUpdate:modelValue":a[5]||(a[5]=e=>_.value.linkUrl=e),maxlength:"255"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),R.value?.withSubtitle?(p(),v(U,{key:3,prop:"subtitle",label:l.$t("blockItem.subtitle"),rules:{required:R.value?.subtitleRequired,message:()=>l.$t("v.required")}},{default:g((()=>[k(w,{modelValue:_.value.subtitle,"onUpdate:modelValue":a[6]||(a[6]=e=>_.value.subtitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),R.value?.withDescription?(p(),v(U,{key:4,prop:"description",label:l.$t("blockItem.description"),rules:{required:R.value?.descriptionRequired,message:()=>l.$t("v.required")}},{default:g((()=>[k(w,{modelValue:_.value.description,"onUpdate:modelValue":a[7]||(a[7]=e=>_.value.description=e),type:"textarea",rows:5,maxlength:"1000"},null,8,["modelValue"])])),_:1},8,["label","rules"])):x("",!0),R.value?.withImage?(p(),v(U,{key:5,prop:"image",label:l.$t("blockItem.image"),rules:{required:R.value?.imageRequired,message:()=>l.$t("v.required")}},{default:g((()=>[k(B(r),{modelValue:_.value.image,"onUpdate:modelValue":a[8]||(a[8]=e=>_.value.image=e),width:R.value.imageWidth,height:R.value.imageHeight,mode:"manual"},null,8,["modelValue","width","height"]),e.images.length>0?(p(),v(C,{key:0,class:"self-start ml-2",onClick:a[9]||(a[9]=()=>T.value=!0)},{default:g((()=>[h(y(l.$t("article.extractImage")),1)])),_:1})):x("",!0)])),_:1},8,["label","rules"])):x("",!0),R.value?.withMobileImage?(p(),v(U,{key:6,prop:"mobileImage",label:l.$t("blockItem.mobileImage"),rules:{required:R.value?.mobileImageRequired,message:()=>l.$t("v.required")}},{default:g((()=>[k(B(r),{modelValue:_.value.mobileImage,"onUpdate:modelValue":a[10]||(a[10]=e=>_.value.mobileImage=e),width:R.value.mobileImageWidth,height:R.value.mobileImageHeight,mode:"manual"},null,8,["modelValue","width","height"])])),_:1},8,["label","rules"])):x("",!0),R.value?.withVideo?(p(),v(U,{key:7,prop:"video",label:l.$t("blockItem.video"),rules:{required:R.value?.videoRequired,message:()=>l.$t("v.required")}},{default:g((()=>[k(w,{modelValue:_.value.video,"onUpdate:modelValue":a[11]||(a[11]=e=>_.value.video=e),maxlength:"255"},{prepend:g((()=>[h("URL")])),_:1},8,["modelValue"]),k(B(j),{type:"video","on-success":e=>_.value.video=e.url},null,8,["on-success"])])),_:1},8,["label","rules"])):x("",!0),k(U,{prop:"targetBlank",label:l.$t("blockItem.targetBlank")},{default:g((()=>[k(F,{modelValue:_.value.targetBlank,"onUpdate:modelValue":a[12]||(a[12]=e=>_.value.targetBlank=e)},null,8,["modelValue"])])),_:1},8,["label"]),k(U,{prop:"enabled",label:l.$t("blockItem.enabled")},{default:g((()=>[k(F,{modelValue:_.value.enabled,"onUpdate:modelValue":a[13]||(a[13]=e=>_.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","addable","model-value"]),k(N,{modelValue:T.value,"onUpdate:modelValue":a[18]||(a[18]=e=>T.value=e),urls:e.images,"append-to-body":!0,onFinished:a[19]||(a[19]=e=>_.value.image=e[0])},null,8,["modelValue","urls"])])}}}))}}}));
