System.register(["./index-legacy-a60600c8.js"],(function(e,l){"use strict";var t,a,n,u,o,d,s,r,i,p,c,m,v,y,b,f,g,V,h,k,_,x,S,$,I,U,w,C,q,j;return{setters:[e=>{t=e.b2,a=e.b3,n=e.d,u=e.p,o=e.r,d=e.v,s=e.b,r=e.e,i=e.I,p=e.i,c=e.w,m=e.j,v=e.b4,y=e.l,b=e.t,f=e.k,g=e.ag,V=e.ah,h=e.u,k=e.a6,_=e.b5,x=e.b6,S=e.ae,$=e.aQ,I=e.f,U=e.aF,w=e.m,C=e.b7,q=e.aS,j=e.b1}],execute:function(){const l="ujcms_column_settings",O=t({}),Q=t(function(){const e=localStorage.getItem(l);return e?JSON.parse(e):{}}()),E=(e,l)=>{for(let t=0,a=e.length;t<a;)-1===l.findIndex((l=>l.title===e[t].title))?(e.splice(t,1),a-=1):t+=1;return l.forEach((l=>{-1===e.findIndex((e=>e.title===l.title))&&e.push({...l})})),e},F=e=>(Q[e]||(Q[e]=[]),a(Q,e)),J={class:"inline-flex align-middle"},N=["divided"],z=(e("b",n({__name:"ColumnSetting",props:{name:{type:String,required:!0}},setup(e){const t=e,{name:n}=u(t),h=F(n.value),k=(e=>(O[e]||(O[e]=[]),a(O,e)))(n.value),_=o(!1);d(h,(()=>{localStorage.setItem(l,JSON.stringify(Q))}),{deep:!0});const x=()=>{h.value=E([],k.value)};return(e,l)=>{const t=s("el-icon"),a=s("el-tooltip"),n=s("el-button"),u=s("el-checkbox"),o=s("el-drawer");return r(),i("div",J,[p(a,{content:e.$t("table.columnsSetting"),placement:"top"},{default:c((()=>[p(t,{class:"cursor-pointer text-lg text-gray-regular",onClick:l[0]||(l[0]=()=>_.value=!0)},{default:c((()=>[p(m(v))])),_:1})])),_:1},8,["content"]),p(o,{modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=e=>_.value=e),title:e.$t("table.columnsSetting"),size:375},{default:c((()=>[p(n,{class:"mb-1",round:"",onClick:x},{default:c((()=>[y(b(e.$t("reset")),1)])),_:1}),f("ul",null,[(r(!0),i(g,null,V(m(h),((e,l)=>(r(),i("li",{key:e.title,divided:0===l},[p(u,{modelValue:e.display,"onUpdate:modelValue":l=>e.display=l},{default:c((()=>[y(b(e.title),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,N)))),128))])])),_:1},8,["modelValue","title"])])}}})),e("c",n({name:"ColumnList",props:{name:{type:String,required:!0}},setup(e,{slots:l}){const{name:t}=u(e),{t:a}=h(),n=l.default?.()??[],o=e=>"selection"===e?.type?a("table.selection"):e?.label,d=n.map((e=>({title:o(e.props),display:"none"!==e.props?.display})));((e,l)=>{O[e]=l,Q[e]||(Q[e]=[]);const t=Q[e];E(t,l)})(t.value,d);const s=F(t.value);return{columns:k((()=>n.filter((e=>{const l=s.value.find((l=>o(e.props)===l.title));return!l||l.display})).map((e=>({...e,key:o(e.props)}))).sort(((e,l)=>{let t=s.value.findIndex((l=>l.title===o(e)));t<0&&(t=n.findIndex((l=>o(l)===o(e))));let a=s.value.findIndex((e=>e.title===o(l)));return a<0&&(a=n.findIndex((e=>o(e)===o(l)))),t-a}))))}},render(){return this.columns}})),n({name:"QueryInput",props:{inputs:{type:Array,required:!0},name:{type:String,required:!0}},setup(e){const{inputs:l,name:t}=u(e);return()=>l.value.find((e=>e.props.name===t.value))}})),A={class:"flex"},L={class:"space-y-1"},B=(e("_",n({__name:"QueryForm",props:{params:{type:Object,required:!0}},emits:{search:null,reset:null},setup(e){const l=e,{params:t}=u(l),a=_();x("params",t);const n=o([]),d=k((()=>a.default?.()??[]));n.value=d.value.map((e=>({label:e.props?.label,name:e.props?.name})));const[v]=n.value,h=o([v.name]),q=k((()=>n.value.filter((e=>!h.value.includes(e.name))))),j=()=>{Object.keys(t.value).forEach((e=>{h.value.includes(e)||-1!==h.value.findIndex((l=>l.split(",").includes(e)))||delete t.value[e]}))};return(e,l)=>{const t=s("el-button"),a=s("el-option"),u=s("el-select"),o=s("el-button-group");return r(),i("form",A,[f("div",L,[(r(!0),i(g,null,V(h.value,((e,o)=>(r(),i("div",{key:e,class:"flex"},[p(t,{icon:m(0==o?S:$),disabled:o<=0&&q.value.length<=0,circle:"",onClick:()=>(e=>{if(0===e){const[e]=q.value;h.value[h.value.length]=e.name}else h.value.splice(e,1),j()})(o)},null,8,["icon","disabled","onClick"]),p(u,{modelValue:h.value[o],"onUpdate:modelValue":e=>h.value[o]=e,class:"w-36",onChange:l[0]||(l[0]=()=>j())},{default:c((()=>[(r(!0),i(g,null,V(n.value.filter((e=>e.name===h.value[o]||q.value.includes(e))),(e=>(r(),I(a,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),p(z,{inputs:d.value,name:h.value[o]},null,8,["inputs","name"])])))),128))]),f("div",null,[p(o,{class:"ml-2"},{default:c((()=>[p(t,{"native-type":"submit",icon:m(U),onClick:l[1]||(l[1]=w((()=>e.$emit("search")),["prevent"]))},{default:c((()=>[y(b(e.$t("search")),1)])),_:1},8,["icon"]),p(t,{icon:m(C),onClick:l[2]||(l[2]=()=>e.$emit("reset"))},{default:c((()=>[y(b(e.$t("reset")),1)])),_:1},8,["icon"])])),_:1})])])}}})),{key:0,class:"inline-block"});e("a",n({__name:"QueryItem",props:{label:{type:String,required:!0},name:{type:String,required:!0},type:{type:String,default:null},options:{type:Object,default:null}},setup(e){const l=e,t=q("params"),{name:a}=u(l),[n,d]=a.value.split(","),v=o(n),y=o(d);return(l,n)=>{const u=s("el-input-number"),o=s("el-date-picker"),d=s("el-option"),b=s("el-select"),f=s("el-input");return j(l.$slots,"default",{},(()=>["number"===e.type?(r(),i("div",B,[p(u,{modelValue:m(t)[v.value],"onUpdate:modelValue":n[0]||(n[0]=e=>m(t)[v.value]=e),placeholder:l.$t("begin.number"),class:"w-48"},null,8,["modelValue","placeholder"]),p(u,{modelValue:m(t)[y.value],"onUpdate:modelValue":n[1]||(n[1]=e=>m(t)[y.value]=e),placeholder:l.$t("end.number"),class:"w-48"},null,8,["modelValue","placeholder"])])):"date"===e.type?(r(),I(o,{key:1,modelValue:m(t)[m(a)],"onUpdate:modelValue":n[2]||(n[2]=e=>m(t)[m(a)]=e),type:"daterange","start-placeholder":l.$t("begin.date"),"end-placeholder":l.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):"datetime"===e.type?(r(),I(o,{key:2,modelValue:m(t)[m(a)],"onUpdate:modelValue":n[3]||(n[3]=e=>m(t)[m(a)]=e),type:"datetimerange","start-placeholder":l.$t("begin.date"),"end-placeholder":l.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.options?(r(),I(b,{key:3,modelValue:m(t)[m(a)],"onUpdate:modelValue":n[4]||(n[4]=e=>m(t)[m(a)]=e),multiple:"",class:"w-96"},{default:c((()=>[(r(!0),i(g,null,V(e.options,(e=>(r(),I(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(r(),I(f,{key:4,modelValue:m(t)[m(a)],"onUpdate:modelValue":n[5]||(n[5]=e=>m(t)[m(a)]=e),class:"w-96"},null,8,["modelValue"]))]))}}}))}}}));
