import{d as x,U as c,r as g,o as w,b as y,e as u,I as l,k as d,i as t,w as e,ag as B,ah as j,l as r,t as s,j as m,a0 as $}from"./index-53093fce.js";import{d as R}from"./duration-585bb4b1.js";import{b as H}from"./stat-44c6c647.js";const S={class:"p-3 mt-3 app-block"},N={class:"flex p-3 mt-3 justify-evenly app-block"},U={class:"h-64 w-60 text-primary"},E={class:"mt-2 text-center"},P={class:"flex items-center justify-center mt-2"},q={class:"text-3xl"},F={key:0},I={key:1},L={class:"mt-4 space-y-2 text-sm"},T={key:0},z={key:1},A={key:0},G={key:1},J={key:0},K={key:1},O={class:"h-64 w-60 text-gray-secondary"},Q={class:"mt-2 text-center"},W={class:"flex items-center justify-center mt-2"},X={class:"text-3xl"},Z={key:0},tt={key:1},et={class:"mt-4 space-y-2 text-sm"},at={key:0},st={key:1},ot={key:0},nt={key:1},ut={key:0},lt={key:1},ct=x({__name:"VisitVisitor",setup(it){c.extend(R);const h=g("last30day"),D=a=>{switch(a){case"today":return c().format("YYYY-MM-DD");case"yesterday":return c().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return c().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return c().subtract(29,"day").format("YYYY-MM-DD");case"lastYear":return c().subtract(1,"year").format("YYYY-MM-DD");default:return}},b=a=>a==="yesterday"?c().subtract(1,"day").format("YYYY-MM-DD"):c().format("YYYY-MM-DD"),n=g({}),i=g({}),C=async a=>{const _=await H({begin:D(a),end:b(a)});n.value=_.newVisitor,i.value=_.oldVisitor;const f=n.value.uvCount+i.value.uvCount;f>0?(n.value.proportion=n.value.uvCount*100/f,i.value.proportion=i.value.uvCount*100/f):(n.value.proportion=50,i.value.proportion=50)};return w(async()=>{C(h.value)}),(a,_)=>{var k,V;const f=y("el-radio-button"),M=y("el-radio-group"),Y=y("el-icon"),o=y("el-col"),v=y("el-row");return u(),l("div",null,[d("div",S,[d("div",null,[t(M,{modelValue:h.value,"onUpdate:modelValue":_[0]||(_[0]=p=>h.value=p),onChange:_[1]||(_[1]=p=>C(p))},{default:e(()=>[(u(),l(B,null,j(["today","yesterday","last7day","last30day","lastYear","all"],p=>t(f,{key:p,label:p},{default:e(()=>[r(s(a.$t(`visit.${p}`)),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),d("div",N,[d("div",U,[d("div",E,s(a.$t("visitVisitor.newVisitor")),1),d("div",P,[t(Y,{class:"text-5xl"},{default:e(()=>[t(m($))]),_:1}),d("span",q,[n.value.uvCount>0?(u(),l("span",F,s(a.$n((k=n.value.proportion)!=null?k:0,"decimal")),1)):(u(),l("span",I,"0")),r("% ")])]),d("div",L,[t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.pv")),1)]),_:1}),t(o,{span:12},{default:e(()=>[r(s(n.value.pvCount),1)]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.uv")),1)]),_:1}),t(o,{span:12},{default:e(()=>[r(s(n.value.uvCount),1)]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.bounceRate")),1)]),_:1}),t(o,{span:12},{default:e(()=>[n.value.uvCount>0?(u(),l("span",T,s(a.$n(n.value.bounceCount*100/n.value.uvCount,"decimal"))+"%",1)):(u(),l("span",z,"-"))]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averageDuration")),1)]),_:1}),t(o,{span:12},{default:e(()=>[n.value.uvCount>0?(u(),l("span",A,s(m(c).duration(n.value.duration/n.value.uvCount,"seconds").format("HH:mm:ss")),1)):(u(),l("span",G,"-"))]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averagePv")),1)]),_:1}),t(o,{span:12},{default:e(()=>[n.value.uvCount>0?(u(),l("span",J,s(a.$n(n.value.pvCount/n.value.uvCount,"decimal")),1)):(u(),l("span",K,"-"))]),_:1})]),_:1})])]),d("div",O,[d("div",Q,s(a.$t("visitVisitor.oldVisitor")),1),d("div",W,[t(Y,{class:"text-5xl"},{default:e(()=>[t(m($))]),_:1}),d("span",X,[i.value.uvCount>0?(u(),l("span",Z,s(a.$n((V=i.value.proportion)!=null?V:0,"decimal")),1)):(u(),l("span",tt,"0")),r("% ")])]),d("div",et,[t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.pv")),1)]),_:1}),t(o,{span:12},{default:e(()=>[r(s(i.value.pvCount),1)]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visitVisitor.uv")),1)]),_:1}),t(o,{span:12},{default:e(()=>[r(s(i.value.uvCount),1)]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.bounceRate")),1)]),_:1}),t(o,{span:12},{default:e(()=>[i.value.uvCount>0?(u(),l("span",at,s(a.$n(i.value.bounceCount*100/i.value.uvCount,"decimal"))+"%",1)):(u(),l("span",st,"-"))]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averageDuration")),1)]),_:1}),t(o,{span:12},{default:e(()=>[n.value.uvCount>0?(u(),l("span",ot,s(m(c).duration(i.value.duration/i.value.uvCount,"seconds").format("HH:mm:ss")),1)):(u(),l("span",nt,"-"))]),_:1})]),_:1}),t(v,{gutter:24},{default:e(()=>[t(o,{span:12,class:"text-right"},{default:e(()=>[r(s(a.$t("visit.averagePv")),1)]),_:1}),t(o,{span:12},{default:e(()=>[i.value.uvCount>0?(u(),l("span",ut,s(a.$n(i.value.pvCount/i.value.uvCount,"decimal")),1)):(u(),l("span",lt,"-"))]),_:1})]),_:1})])])])])])}}});export{ct as default};
