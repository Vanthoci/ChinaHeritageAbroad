import{d as N,p as B,r as w,v as E,b as p,e as d,I as _,i,w as f,j as e,b2 as F,l as S,t as U,k as O,ag as q,ah as j,b3 as z,b4 as A,a6 as Q,ae as D,b5 as H,f as h,aH as L,m as M,b6 as P,aR as T,b1 as G}from"./index-b174b04d.js";import{g as J,a as K,s as W,m as X}from"./ColumnList.vue_vue_type_script_lang-d04d1203.js";const Y={class:"inline-flex align-middle"},Z=["divided"],oe=N({__name:"ColumnSetting",props:{name:{type:String,required:!0}},setup(m){const V=m,{name:t}=B(V),n=J(t.value),b=K(t.value),g=w(!1);E(n,()=>W(),{deep:!0});const $=()=>{n.value=X([],b.value)};return(s,r)=>{const u=p("el-icon"),C=p("el-tooltip"),l=p("el-button"),a=p("el-checkbox"),c=p("el-drawer");return d(),_("div",Y,[i(C,{content:s.$t("table.columnsSetting"),placement:"top"},{default:f(()=>[i(u,{class:"cursor-pointer text-lg text-gray-regular",onClick:r[0]||(r[0]=()=>g.value=!0)},{default:f(()=>[i(e(F))]),_:1})]),_:1},8,["content"]),i(c,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=v=>g.value=v),title:s.$t("table.columnsSetting"),size:375},{default:f(()=>[i(l,{class:"mb-1",round:"",onClick:$},{default:f(()=>[S(U(s.$t("reset")),1)]),_:1}),O("ul",null,[(d(!0),_(q,null,j(e(n),(v,o)=>(d(),_("li",{key:v.title,divided:o===0},[i(a,{modelValue:v.display,"onUpdate:modelValue":I=>v.display=I},{default:f(()=>[S(U(v.title),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])],8,Z))),128))])]),_:1},8,["modelValue","title"])])}}}),x=N({name:"QueryInput",props:{inputs:{type:Array,required:!0},name:{type:String,required:!0}},setup(m){const{inputs:V,name:t}=B(m);return()=>V.value.find(n=>n.props.name===t.value)}}),ee={class:"flex"},le={class:"space-y-1"},se=N({__name:"QueryForm",props:{params:{type:Object,required:!0}},emits:{search:null,reset:null},setup(m){const V=m,{params:t}=B(V),n=z();A("params",t);const b=w([]),g=Q(()=>{var l,a;return(a=(l=n.default)==null?void 0:l.call(n))!=null?a:[]});b.value=g.value.map(l=>{var a,c;return{label:(a=l.props)==null?void 0:a.label,name:(c=l.props)==null?void 0:c.name}});const[$]=b.value,s=w([$.name]),r=Q(()=>b.value.filter(l=>!s.value.includes(l.name))),u=()=>{Object.keys(t.value).forEach(l=>{!s.value.includes(l)&&s.value.findIndex(a=>a.split(",").includes(l))===-1&&delete t.value[l]})},C=l=>{if(l===0){const[a]=r.value;s.value[s.value.length]=a.name}else s.value.splice(l,1),u()};return(l,a)=>{const c=p("el-button"),v=p("el-option"),o=p("el-select"),I=p("el-button-group");return d(),_("form",ee,[O("div",le,[(d(!0),_(q,null,j(s.value,(R,k)=>(d(),_("div",{key:R,class:"flex"},[i(c,{icon:k==0?e(D):e(H),disabled:k<=0&&r.value.length<=0,circle:"",onClick:()=>C(k)},null,8,["icon","disabled","onClick"]),i(o,{modelValue:s.value[k],"onUpdate:modelValue":y=>s.value[k]=y,class:"w-36",onChange:a[0]||(a[0]=()=>u())},{default:f(()=>[(d(!0),_(q,null,j(b.value.filter(y=>y.name===s.value[k]||r.value.includes(y)),y=>(d(),h(v,{key:y.name,label:y.label,value:y.name},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),i(x,{inputs:g.value,name:s.value[k]},null,8,["inputs","name"])]))),128))]),O("div",null,[i(I,{class:"ml-2"},{default:f(()=>[i(c,{"native-type":"submit",icon:e(L),onClick:a[1]||(a[1]=M(()=>l.$emit("search"),["prevent"]))},{default:f(()=>[S(U(l.$t("search")),1)]),_:1},8,["icon"]),i(c,{icon:e(P),onClick:a[2]||(a[2]=()=>l.$emit("reset"))},{default:f(()=>[S(U(l.$t("reset")),1)]),_:1},8,["icon"])]),_:1})])])}}}),te={key:0,class:"inline-block"},ue=N({__name:"QueryItem",props:{label:{type:String,required:!0},name:{type:String,required:!0},type:{type:String,default:null},options:{type:Object,default:null}},setup(m){const V=m,t=T("params"),{name:n}=B(V),[b,g]=n.value.split(","),$=w(b),s=w(g);return(r,u)=>{const C=p("el-input-number"),l=p("el-date-picker"),a=p("el-option"),c=p("el-select"),v=p("el-input");return G(r.$slots,"default",{},()=>[m.type==="number"?(d(),_("div",te,[i(C,{modelValue:e(t)[$.value],"onUpdate:modelValue":u[0]||(u[0]=o=>e(t)[$.value]=o),placeholder:r.$t("begin.number"),class:"w-48"},null,8,["modelValue","placeholder"]),i(C,{modelValue:e(t)[s.value],"onUpdate:modelValue":u[1]||(u[1]=o=>e(t)[s.value]=o),placeholder:r.$t("end.number"),class:"w-48"},null,8,["modelValue","placeholder"])])):m.type==="date"?(d(),h(l,{key:1,modelValue:e(t)[e(n)],"onUpdate:modelValue":u[2]||(u[2]=o=>e(t)[e(n)]=o),type:"daterange","start-placeholder":r.$t("begin.date"),"end-placeholder":r.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):m.type==="datetime"?(d(),h(l,{key:2,modelValue:e(t)[e(n)],"onUpdate:modelValue":u[3]||(u[3]=o=>e(t)[e(n)]=o),type:"datetimerange","start-placeholder":r.$t("begin.date"),"end-placeholder":r.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):m.options?(d(),h(c,{key:3,modelValue:e(t)[e(n)],"onUpdate:modelValue":u[4]||(u[4]=o=>e(t)[e(n)]=o),multiple:"",class:"w-96"},{default:f(()=>[(d(!0),_(q,null,j(m.options,o=>(d(),h(a,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(d(),h(v,{key:4,modelValue:e(t)[e(n)],"onUpdate:modelValue":u[5]||(u[5]=o=>e(t)[e(n)]=o),class:"w-96"},null,8,["modelValue"]))])}}});export{se as _,ue as a,oe as b};
