System.register(["./index-legacy-414c7520.js","./tree-legacy-939d2e11.js","./config-legacy-94002286.js","./user-legacy-6e907eb4.js","./FileListUpload.vue_vue_type_style_index_0_scoped_8f839ee5_lang-legacy-0138fc03.js","./BaseUpload.vue_vue_type_style_index_0_scoped_bf818630_lang-legacy-30235b0a.js","./FieldItem.vue_vue_type_script_setup_true_lang-legacy-8c33c582.js","./sortable.esm-legacy-94ec1419.js","./content-legacy-eb19b01d.js","./BaseUpload-legacy-9180f291.js"],(function(e,l){"use strict";var a,t,u,s,d,i,o,n,r,m,p,v,g,b,f,y,_,c,h,V,w,k,q,x,$,U,S,C,W,F,B,H,I,j,D,T,L,R,z,A,K,M,E;return{setters:[e=>{a=e.d,t=e.u,u=e.am,s=e.r,d=e.a6,i=e.W,o=e.a3,n=e.v,r=e.o,m=e.b,p=e.c,v=e.e,g=e.f,b=e.w,f=e.i,y=e.I,_=e.ah,c=e.ag,h=e.g,V=e.as,w=e.j,k=e.k,q=e.l,x=e.t,$=e.an,U=e.m,S=e.h,C=e.Q,W=e.R,F=e.E,B=e._},e=>{H=e.t},e=>{I=e.B,j=e.q,D=e.C,T=e.D,L=e.E,R=e.F,z=e.G,A=e.H},e=>{K=e.q},e=>{M=e.a},null,e=>{E=e._},null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".el-tabs[data-v-daa666ab] .el-tabs__header{float:right;margin-right:1px}.watermark-position[data-v-daa666ab]{display:flex;height:9rem;width:9rem;flex-wrap:wrap;border-radius:.25rem;border-width:1px;border-style:dashed;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.watermark-position[data-v-daa666ab] .el-radio__label{padding-left:0}.watermark-position[data-v-daa666ab] .el-radio{margin-right:0;display:flex;height:33.333333%;width:33.333333%;align-items:center;justify-content:center}\n",document.head.appendChild(l);const N={class:"watermark-position"},P=(e=>(C("data-v-daa666ab"),e=e(),W(),e))((()=>k("span",null,null,-1))),G=["innerHTML"],O={key:6};e("default",B(a({name:"SiteSettings",emits:{"update:modelValue":null,finished:null},setup(e){const{t:l}=t(),a=u(),C=s(),W=s(),B=s({}),J=s(!1),Q=s(!1),Y=s([]),X=s([]),Z=s([]),ee=s(),le=d((()=>Z.value.find((e=>e.id===ee.value)))),ae=d((()=>JSON.parse(le.value?.customs||"[]"))),te=[];i("siteSettings:base:update")&&te.push("base"),i("siteSettings:watermark:update")&&te.push("watermark"),i("siteSettings:editor:update")&&(o.epRank>=2||o.epDisplay)&&te.push("editor"),i("siteSettings:messageBoard:update")&&te.push("messageBoard"),i("siteSettings:customs:update")&&te.push("customs");const ue=s(te[0]),se=()=>{"watermark"===ue.value?B.value=W.value.watermark:"editor"===ue.value?(B.value=W.value.editor,null==B.value.typesetting&&(B.value.typesetting={fontFamily:"",fontSize:"",lineHeight:"",textIndent:!1,imageCenterAlign:!0,tableFullWidth:!0,emptyLine:"one",halfWidthCharConversion:!0})):"messageBoard"===ue.value?B.value=W.value.messageBoard:"customs"===ue.value?B.value=W.value.customs:B.value=W.value};n(ue,(()=>se()));const de=async()=>{X.value=await I()},ie=async()=>{Y.value=H(await K())},oe=async()=>{Z.value=await j({type:"site"})},ne=async()=>{W.value=await D(),ee.value=W.value.modelId};r((async()=>{J.value=!0;try{await Promise.all([de(),ie(),oe(),ne()]),se()}finally{J.value=!1}}));const re=()=>{C.value.validate((async e=>{if(e){Q.value=!0;try{"watermark"===ue.value?await T(B.value):"editor"===ue.value?await L(B.value):"messageBoard"===ue.value?await R(B.value):"customs"===ue.value?await z(B.value):await A(B.value),a.currentSite=await D(),F.success(l("success"))}finally{Q.value=!1}(async()=>{J.value=!0;try{await ne()}finally{J.value=!1}})()}}))};return(e,l)=>{const a=m("el-tab-pane"),t=m("el-tabs"),u=m("el-aside"),s=m("el-switch"),d=m("el-form-item"),i=m("el-col"),n=m("el-radio"),r=m("el-radio-group"),W=m("el-slider"),F=m("el-input"),H=m("el-row"),I=m("el-alert"),j=m("el-divider"),D=m("el-option"),T=m("el-select"),L=m("el-input-number"),R=m("el-button"),z=m("el-form"),A=m("el-main"),K=m("el-container"),Y=p("loading");return v(),g(K,null,{default:b((()=>[f(u,{width:"180px",class:"pr-3"},{default:b((()=>[f(t,{modelValue:ue.value,"onUpdate:modelValue":l[0]||(l[0]=e=>ue.value=e),"tab-position":"left",stretch:"",class:"bg-white"},{default:b((()=>[(v(),y(c,null,_(te,(l=>f(a,{key:l,name:l,label:e.$t(`site.settings.${l}`)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),_:1}),f(A,{class:"p-3 app-block"},{default:b((()=>[h((v(),g(z,{ref_key:"form",ref:C,model:B.value,"label-width":"150px"},{default:b((()=>["watermark"===ue.value?(v(),g(H,{key:0},{default:b((()=>[f(i,{span:24},{default:b((()=>[f(d,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.watermark.enabled",help:""})])),default:b((()=>[f(s,{modelValue:B.value.enabled,"onUpdate:modelValue":l[1]||(l[1]=e=>B.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"overlay",label:e.$t("site.watermark.overlay"),rules:B.value.enabled?{required:!0,message:()=>e.$t("v.required")}:{}},{default:b((()=>[f(w(M),{modelValue:B.value.overlay,"onUpdate:modelValue":l[2]||(l[2]=e=>B.value.overlay=e)},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"position",label:e.$t("site.watermark.position"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:b((()=>[f(r,{modelValue:B.value.position,"onUpdate:modelValue":l[3]||(l[3]=e=>B.value.position=e)},{default:b((()=>[k("div",N,[(v(),y(c,null,_(9,(l=>f(n,{key:l,label:l,title:e.$t(`site.watermark.position.${l}`)},{default:b((()=>[P])),_:2},1032,["label","title"]))),64))])])),_:1},8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:24},{default:b((()=>[f(d,{prop:"dissolve",label:e.$t("site.watermark.dissolve"),rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.watermark.dissolve",help:""})])),default:b((()=>[f(W,{modelValue:B.value.dissolve,"onUpdate:modelValue":l[4]||(l[4]=e=>B.value.dissolve=e),min:0,max:100,"show-input":""},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"minWidth",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.watermark.minWidth",help:""})])),default:b((()=>[f(F,{modelValue:B.value.minWidth,"onUpdate:modelValue":l[5]||(l[5]=e=>B.value.minWidth=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"minHeight",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.watermark.minHeight",help:""})])),default:b((()=>[f(F,{modelValue:B.value.minHeight,"onUpdate:modelValue":l[6]||(l[6]=e=>B.value.minHeight=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"editor"===ue.value&&w(o).epRank<2?(v(),g(I,{key:1,type:"warning",closable:!1,"show-icon":!0},{title:b((()=>[k("span",{innerHTML:e.$t("error.enterprise")},null,8,G)])),_:1})):"editor"===ue.value&&w(o).epRank>=2?(v(),y(c,{key:2},[f(j,null,{default:b((()=>[q(x(e.$t("site.editor.typesetting")),1)])),_:1}),f(H,null,{default:b((()=>[f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.fontFamily"},{label:b((()=>[f(V,{message:"site.editor.typesetting.fontFamily"})])),default:b((()=>[f(T,{modelValue:B.value.typesetting.fontFamily,"onUpdate:modelValue":l[7]||(l[7]=e=>B.value.typesetting.fontFamily=e)},{default:b((()=>[(v(),y(c,null,_([{value:"",label:"默认"},{value:"SimSun",label:"宋体"},{value:"Microsoft YaHei",label:"微软雅黑"},{value:"SimKai,KaiTi",label:"楷体"},{value:"SimHei",label:"黑体"},{value:"SimLi,LiSu",label:"隶书"},{value:"andale mono,times",label:"Andale Mono"},{value:"arial,helvetica,sans-serif",label:"Arial"},{value:"arial black,avant garde",label:"Arial Black"},{value:"comic sans ms,sans-serif",label:"Comic Sans MS"},{value:"helvetica",label:"Helvetica"},{value:"impact,chicago",label:"Impact"},{value:"times new roman,times",label:"Times New Roman"}],(e=>f(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.fontSize"},{label:b((()=>[f(V,{message:"site.editor.typesetting.fontSize"})])),default:b((()=>[f(T,{modelValue:B.value.typesetting.fontSize,"onUpdate:modelValue":l[8]||(l[8]=e=>B.value.typesetting.fontSize=e)},{default:b((()=>[(v(),y(c,null,_([{value:"",label:"默认"},{value:"12px",label:"小五"},{value:"14px",label:"五号"},{value:"16px",label:"小四"},{value:"18px",label:"四号"},{value:"20px",label:"小三"},{value:"22px",label:"三号"},{value:"24px",label:"小二"},{value:"28px",label:"二号"}],(e=>f(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.lineHeight"},{label:b((()=>[f(V,{message:"site.editor.typesetting.lineHeight"})])),default:b((()=>[f(T,{modelValue:B.value.typesetting.lineHeight,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value.typesetting.lineHeight=e)},{default:b((()=>[(v(),y(c,null,_([{value:"",label:"默认"},{value:"1.0",label:"1.0"},{value:"1.1",label:"1.1"},{value:"1.2",label:"1.2"},{value:"1.3",label:"1.3"},{value:"1.4",label:"1.4"},{value:"1.5",label:"1.5"},{value:"2.0",label:"2.0"}],(e=>f(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.emptyLine"},{label:b((()=>[f(V,{message:"site.editor.typesetting.emptyLine"})])),default:b((()=>[f(T,{modelValue:B.value.typesetting.emptyLine,"onUpdate:modelValue":l[10]||(l[10]=e=>B.value.typesetting.emptyLine=e)},{default:b((()=>[(v(),y(c,null,_([{value:"remain",label:"保留空行"},{value:"one",label:"合并为一行"},{value:"remove",label:"删除空行"}],(e=>f(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.textIndent"},{label:b((()=>[f(V,{message:"site.editor.typesetting.textIndent"})])),default:b((()=>[f(s,{modelValue:B.value.typesetting.textIndent,"onUpdate:modelValue":l[11]||(l[11]=e=>B.value.typesetting.textIndent=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.imageCenterAlign"},{label:b((()=>[f(V,{message:"site.editor.typesetting.imageCenterAlign"})])),default:b((()=>[f(s,{modelValue:B.value.typesetting.imageCenterAlign,"onUpdate:modelValue":l[12]||(l[12]=e=>B.value.typesetting.imageCenterAlign=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.tableFullWidth"},{label:b((()=>[f(V,{message:"site.editor.typesetting.tableFullWidth"})])),default:b((()=>[f(s,{modelValue:B.value.typesetting.tableFullWidth,"onUpdate:modelValue":l[13]||(l[13]=e=>B.value.typesetting.tableFullWidth=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"typesetting.halfWidthCharConversion"},{label:b((()=>[f(V,{message:"site.editor.typesetting.halfWidthCharConversion"})])),default:b((()=>[f(s,{modelValue:B.value.typesetting.halfWidthCharConversion,"onUpdate:modelValue":l[14]||(l[14]=e=>B.value.typesetting.halfWidthCharConversion=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})],64)):"messageBoard"===ue.value?(v(),g(H,{key:3},{default:b((()=>[f(i,{span:12},{default:b((()=>[f(d,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.messageBoard.enabled"})])),default:b((()=>[f(s,{modelValue:B.value.enabled,"onUpdate:modelValue":l[15]||(l[15]=e=>B.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"loginRequired",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.messageBoard.loginRequired"})])),default:b((()=>[f(s,{modelValue:B.value.loginRequired,"onUpdate:modelValue":l[16]||(l[16]=e=>B.value.loginRequired=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"customs"===ue.value?(v(),g(H,{key:4},{default:b((()=>[(v(!0),y(c,null,_(ae.value,(l=>(v(),g(i,{key:l.code,span:l.double?12:24},{default:b((()=>[f(d,{prop:l.code,rules:l.required?{required:!0,message:()=>e.$t("v.required")}:void 0},{label:b((()=>[f(V,{label:l.name},null,8,["label"])])),default:b((()=>[f(E,{modelValue:B.value[l.code],"onUpdate:modelValue":e=>B.value[l.code]=e,"model-key":B.value[l.code+"_key"],"onUpdate:modelKey":e=>B.value[l.code+"_key"]=e,field:l},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])])),_:2},1032,["prop","rules"])])),_:2},1032,["span"])))),128))])),_:1})):(v(),g(H,{key:5},{default:b((()=>[f(i,{span:12},{default:b((()=>[f(d,{prop:"name",label:e.$t("site.name"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:b((()=>[f(F,{ref:"focus",modelValue:B.value.name,"onUpdate:modelValue":l[17]||(l[17]=e=>B.value.name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"protocol",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.protocol",help:""})])),default:b((()=>[f(T,{modelValue:B.value.protocol,"onUpdate:modelValue":l[18]||(l[18]=e=>B.value.protocol=e),class:"w-full"},{default:b((()=>[(v(),y(c,null,_(["http","https"],(e=>f(D,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"domain",rules:[{required:!0,message:()=>e.$t("v.required")},{pattern:/^[a-z0-9-.]*$/,message:()=>e.$t("site.error.domainPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:b((()=>[f(V,{message:"site.domain",help:""})])),default:b((()=>[f(F,{modelValue:B.value.domain,"onUpdate:modelValue":l[19]||(l[19]=e=>B.value.domain=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"subDir",rules:[{pattern:/^[\w-]*$/,message:()=>e.$t("site.error.subDirPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:b((()=>[f(V,{message:"site.subDir",help:""})])),default:b((()=>[f(F,{modelValue:B.value.subDir,"onUpdate:modelValue":l[20]||(l[20]=e=>B.value.subDir=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"theme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.theme",help:""})])),default:b((()=>[f(T,{modelValue:B.value.theme,"onUpdate:modelValue":l[21]||(l[21]=e=>B.value.theme=e),class:"w-full"},{default:b((()=>[(v(!0),y(c,null,_(X.value,(e=>(v(),g(D,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"mobileTheme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.mobileTheme",help:""})])),default:b((()=>[f(T,{modelValue:B.value.mobileTheme,"onUpdate:modelValue":l[22]||(l[22]=e=>B.value.mobileTheme=e),class:"w-full"},{default:b((()=>[(v(!0),y(c,null,_(X.value,(e=>(v(),g(D,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"modelId",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.model",help:""})])),default:b((()=>[f(T,{modelValue:B.value.modelId,"onUpdate:modelValue":l[23]||(l[23]=e=>B.value.modelId=e),class:"w-full"},{default:b((()=>[(v(!0),y(c,null,_(Z.value,(e=>(v(),g(D,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:24},{default:b((()=>[f(d,{prop:"logo"},{label:b((()=>[f(V,{message:"site.logo",help:""})])),default:b((()=>[f(w(M),{modelValue:B.value.logo,"onUpdate:modelValue":l[24]||(l[24]=e=>B.value.logo=e)},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"seoTitle"},{label:b((()=>[f(V,{message:"site.seoTitle",help:""})])),default:b((()=>[f(F,{modelValue:B.value.seoTitle,"onUpdate:modelValue":l[25]||(l[25]=e=>B.value.seoTitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"seoKeywords"},{label:b((()=>[f(V,{message:"site.seoKeywords",help:""})])),default:b((()=>[f(F,{modelValue:B.value.seoKeywords,"onUpdate:modelValue":l[26]||(l[26]=e=>B.value.seoKeywords=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:24},{default:b((()=>[f(d,{prop:"seoDescription"},{label:b((()=>[f(V,{message:"site.seoDescription",help:""})])),default:b((()=>[f(F,{modelValue:B.value.seoDescription,"onUpdate:modelValue":l[27]||(l[27]=e=>B.value.seoDescription=e),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])])),_:1})])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"pageSize",rules:{required:!0,message:()=>e.$t("v.required")}},{label:b((()=>[f(V,{message:"site.pageSize",help:""})])),default:b((()=>[f(L,{modelValue:B.value.pageSize,"onUpdate:modelValue":l[28]||(l[28]=e=>B.value.pageSize=e),min:1,max:200},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),f(i,{span:12},{default:b((()=>[f(d,{prop:"status"},{label:b((()=>[f(V,{message:"site.status",help:""})])),default:b((()=>[f(r,{modelValue:B.value.status,"onUpdate:modelValue":l[29]||(l[29]=e=>B.value.status=e)},{default:b((()=>[(v(),y(c,null,_([0,1],(l=>f(n,{key:l,label:l},{default:b((()=>[q(x(e.$t(`site.status.${l}`)),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})),"editor"!==ue.value||w(o).epRank>=2?(v(),y("div",O,[f(R,{disabled:w($)(`siteSettings:${ue.value}:update`),loading:Q.value,type:"primary","native-type":"submit",onClick:U(re,["prevent"])},{default:b((()=>[q(x(e.$t("save")),1)])),_:1},8,["disabled","loading","onClick"])])):S("",!0)])),_:1},8,["model"])),[[Y,J.value]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-daa666ab"]]))}}}));
